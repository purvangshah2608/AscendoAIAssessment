services:
  backend-test:
    build:
      context: ./backend
      dockerfile: Dockerfile
    environment:
      - DATABASE_URL=sqlite+aiosqlite:///:memory
      - SECRET_KEY=test-secret-key-for-assessment
      - CORS_ORIGINS=["http://localhost:3000"]
    volumes:
      - ./backend:/app
    command: >
      sh -c "pytest tests/ -v --cov=app --cov-report=term-missing"